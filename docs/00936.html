<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>UART Console Device</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00936.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="01478.html" target="topic">System Service Libraries Help</a> &gt; <a href="00933.html" target="topic">Console System Service Library Help</a> &gt; <a href="00938.html" target="topic">Using the Library</a> &gt; <a href="00930.html" target="topic">How the Library Works</a> &gt; <a href="00936.html" target="topic">UART Console Device</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Core Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00019.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00930.html" target="topic">Previous</a> | <a href="00930.html" target="topic">Up</a> | <a href="00928.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYS CONSOLE UART Console Device Topic Title: UART Console Device)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
UART Console Device</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
<strong>Read</strong>&nbsp;</p>
<p class="Element10">
While the user may request multiple bytes of data per read, a typical terminal emulator program sends only one byte per transaction. When multiple bytes are requested, the UART Console Device layer will queue individual byte reads until all bytes are read. The bytes are sent to the user-supplied read buffer as they are read, and the read callback is triggered when all bytes have been read. Only one read operation can be active at a time. The size of the read queue is a configuration option. The size of the read queue determines the number of read requests (not the number of bytes) that can be queued. Each read request in turn can request for multiple bytes to be read. A call to the console read API with the read queue full returns 0.&nbsp;</p>
<p class="Element10">
The read function accepts a pointer to a read buffer as one of the arguments. It is the responsibility of the application programmer to properly allocate the read buffer.&nbsp;</p>
<p class="Element10">
<strong>Write</strong>&nbsp;</p>
<p class="Element10">
The UART console device is capable of writing multiple data bytes per transaction, and queuing multiple write transactions. The size of the write queue is a configuration option. If the user tries to queue more write transactions than the write queue can accommodate, the write function will return 0.&nbsp;</p>
<p class="Element10">
The write function accepts a pointer to a write buffer as one of the arguments. It is the responsibility of the application programmer to properly allocate the write buffer.&nbsp;</p>
<p class="Element10">
<strong>State Machine</strong>&nbsp;</p>
<p class="Element10">
The read and write state machines are run from the interrupt context (from the callback called by the underlying UART PLIB). The underlying PLIB calls the UART console device event handler when the requested number of bytes are transmitted or received (or in case of an error condition). The read/write state machine dispatches application/middleware callback functions and initiates a data transfer if the read/write queue has any request to service.&nbsp;</p>
<p class="Element10">
<strong>Register Callback</strong>&nbsp;</p>
<p class="Element10">
The callback registration mechanism associates a user function with a read or write completion event. The callback function includes an argument containing a pointer to the read or write buffer associated with the transfer that initiated the callback. Separate callback functions must be registered for read and write events. If there is no callback function registered, the event will complete as normal, with no callback executed.&nbsp;</p>
<p class="Element10">
<strong>Flush</strong>&nbsp;</p>
<p class="Element10">
The flush routine in the UART implementation resets the read and write queues. A flush operation is typically triggered in response to an error condition.</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="01478.html" target="topic">System Service Libraries Help</a> &gt; <a href="00933.html" target="topic">Console System Service Library Help</a> &gt; <a href="00938.html" target="topic">Using the Library</a> &gt; <a href="00930.html" target="topic">How the Library Works</a> &gt; <a href="00936.html" target="topic">UART Console Device</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony Core Help</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00019.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00930.html" target="topic">Previous</a> | <a href="00930.html" target="topic">Up</a> | <a href="00928.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYS CONSOLE UART Console Device Topic Title: UART Console Device)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>